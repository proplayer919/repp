import socket
import sys

import scanners.open_ports

def executeCommand(ip):
    ports = []
    ports = scanners.open_ports.scanForOpenPorts(ip)
    while True:
        command = input("EXECUTE ON " + ip + " >")
        for port in ports:
            try:
                s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
                s.settimeout(3)
                s.connect((ip, port))
                s.send(command.encode())
                print(s.recv(1024).decode())
                s.close()
            except socket.gaierror:
                print("Hostname could not be resolved")
                sys.exit()
            except socket.error:
                print("Couldn't connect to server")
            except socket.timeout:
                print("Connection timed out")